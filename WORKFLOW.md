# WORKFLOW.md — Company Dashboard / 独立站推进协议（B 模式）

> 目标：你在前台只做“方向与审核”；我在后台调度本机 agents（Codex/Claude Code/Gemini）把活做完。

## 0) 角色分工

- **Ninjin（你）**：定方向 / 选审美 / 最终合并
- **冰镇小龙虾（我）**：拆解任务、风险控制、汇报进度、做决策文档
- **工头（Coding Agent）**：改代码、跑检查、提交分支、准备 PR
- **研究员（Gemini/搜索）**：竞品拆解、资料梳理、写作/总结（不直接改代码）

## 1) 默认工作方式（B 模式）

### 1.1 触发语

你说任何一种都算开工：
- “推进独立站：……”
- “开工：……”
- “按 jimi.ink 风格继续优化 UI/UX”

### 1.2 交付物

每个任务必须产出：
- ✅ 一个 **git 分支**（不直接在 main 上改）
- ✅ 一个 **可 review 的页面路径**（例如 `/deepdive/`）
- ✅ 一份 **变更摘要（5–12 条）**
- ✅ 一条 **回滚方式**（通常就是不 merge / revert commit）

## 2) 三种协作模式（按你视频总结）

### 2.1 线性流水线（默认）

适用：清晰、可验证、依赖顺序明确。

流程：
1) 我写「任务说明」→ 2) 工头执行（改代码+测试）→ 3) 我做验收清单 → 4) 你审核 → 5) merge

例：
- 抽 `static/site.css` → refactor 页面引用 → 统一主题 → 提交

### 2.2 并行依赖图（加速用）

适用：多个互不影响的子任务，或存在明确依赖边。

做法：
- 为每个子任务开 **独立分支/worktree**
- 并行跑多个工头
- 最后合并到一个集成分支给你审

例：
- UI（主题/排版）+ 内容（deepdive 生成）+ 运维（部署脚本）并行推进

### 2.3 多 Agent 辩论（决策用）

适用：方案不确定、存在权衡（美学/性能/复杂度/维护成本）。

做法：
- 至少 2 个观点：
  - A：极简阅读优先
  - B：信息密度优先
- 输出：
  - 结论 + 2–3 条理由 + 1 个可回滚实验

例：
- 是否把首页做成“文章索引”，还是保留 dashboard 信息墙

## 3) 风险控制（必须遵守）

- **不在 main 上直接改**：所有变更走分支
- **不提交密钥**：`.env*`、token、cookie 一律不进 git
- **可逆原则**：每个改动都要能一键回退（revert/不 merge）
- **小步快跑**：每次变更尽量可在 1–2 分钟内人工肉眼验证

## 4) UI/UX 审核清单（你只看这些）

- 纸感底色是否舒适（不刺眼）
- 标题/摘要/标签层级是否清晰
- hover/focus 是否克制但明确
- 移动端是否不挤、不横滑
- 读 30 秒是否“想继续往下看”

## 5) 内容分发协议（Deepdive）

- 每篇 deepdive 最小字段：`title/date/summary/tags/slug`
- 原则：一次写作，多处复用（独立站 / dashboard / Notion / X）

## 6) 进度汇报模板（你明早问我就按这个回）

- Shipped：commit / 功能
- UI/UX：本轮风格变化
- Review：你该看的链接
- Next：下一步计划（含 1–2 个需要你拍板的点）
